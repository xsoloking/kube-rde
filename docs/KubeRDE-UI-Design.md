# KubeRDE设计

## 1. 用户与权限管理模块（仅管理员可见）

### 1.1 用户列表页面

**功能需求：**

- 显示所有用户列表
- 列表字段：用户名、邮箱、角色、创建时间、状态（活跃/禁用）、当前资源使用情况
- 操作：添加用户、编辑用户、删除用户、修改角色

**交互需求：**

- 支持搜索和筛选（按角色、状态）
- 分页显示
- 批量操作（批量禁用/启用）

### 1.2 用户详情/编辑页面

管理员用户可以通过编辑用户进入用户详情页面，可以编辑所有的编辑项

⚠️ 用户可以点击个人Profile进入用户详情页面，但是只可以修改密码和ssh密钥

**功能需求：**

- 基本信息：用户名、邮箱、密码设置（密码部分个人和admin角色可编辑）
- 角色分配：开发者 / 管理员（单选或复选）（仅admin角色可编辑）
- SSH Keys配置：可以添加和删除SSH公钥（个人可编辑）
- 资源配额设置：（admin角色可编辑）
  - CPU 配额（核心数，如 0-64 cores）
  - 内存配额（GB，如 0-256 GB）
  - 存储配额（GB，如 0-1000 GB）
  - GPU 配额（卡数，如 0-8 cards，可选择 GPU 类型）

**交互需求：**

- 滑块 + 数字输入框组合设置配额
- 实时显示配额使用率（已使用/总配额）
- 表单验证和错误提示

### 1.3 当前用户资源概览（Dashboard）

**功能需求：**

- 显示当前用户的资源配额和使用情况
- 可视化图表：饼图或进度条显示各资源使用率
- Workspace 数量统计
- 运行中的服务数量

------

## 2. Workspace 管理模块

### 2.1 Workspace 列表页面

**功能需求：**

- 显示当前用户所有 Workspace
- 列表字段：
  - Workspace 名称
  - 描述
  - 存储大小（已使用/总分配）
  - 运行中的服务数量
  - 创建时间
  - 状态（正常/异常）
  - 快捷操作按钮

**交互需求：**

- 卡片视图 / 列表视图切换
- 搜索和排序
- 快捷操作：查看详情、删除、克隆

### 2.2 创建 Workspace 页面

**功能需求：**

- 基本信息：
  - Workspace 名称（必填，唯一性校验）
  - 描述（可选）
  - 存储大小（GB，滑块选择，显示剩余配额）
- 初始化选项：
  - 启用服务：
    - File Server（在线文件管理服务，默认勾选）
    - SSH/Coder/Jupyter（默认不选）

**交互需求：**

- 分步向导或单页表单
- 实时校验和提示
- 显示预估资源消耗

### 2.3 Workspace 详情页面

**功能需求：**

- 概览信息：
  - 基本信息展示
  - 存储使用情况（可视化）
  - 关联的 PVC 信息
- 服务管理区域（主要内容，见下节）
- 文件浏览器（可选功能）：
  - 简单的文件列表
  - 上传/下载文件
  - 删除文件

**交互需求：**

- Tab 切换不同功能区域
- 实时刷新服务状态

------

## 3. 服务管理模块

### 3.1 服务列表（在 Workspace 详情内）

**功能需求：**

- 显示当前 Workspace 下所有服务
- 服务卡片显示：
  - 服务类型图标（SSH/Coder/Jupyter/FileServer）
  - 服务名称
  - 状态指示器（运行中/已停止/启动中/错误）
  - 资源配置（CPU/内存/GPU）
  - 运行时长
  - 快捷操作按钮

**交互需求：**

- 添加服务按钮（+）
- 每个服务卡片支持：
  - 启动/停止/重启按钮
  - 查看日志
  - 访问入口（根据服务类型显示）
  - 编辑配置
  - 删除服务

### 3.2 创建服务页面/弹窗

**功能需求：**

- 服务类型选择：
  - SSH Server（显示 SSH 图标和说明）
  - Coder Server（显示 VS Code 图标和说明）
  - Jupyter Notebook（显示 Jupyter 图标和说明）
  - File Server （显示File Server图标和说明）
- 基本配置：
  - 服务名称（自动生成默认名称，可修改）
  - 镜像选择（可选预设或自定义）
- 资源配置：
  - CPU（核心数，显示推荐值）
  - 内存（GB，显示推荐值）
  - GPU（卡数，默认 0，下拉选择 GPU 类型）
- 高级选项（可折叠）：
  - 环境变量
  - 端口映射
  - 挂载路径

**交互需求：**

- 推荐配置快速选择（小/中/大）
- 实时显示将消耗的资源配额
- 表单验证（不能超过剩余配额）

### 3.3 服务详情/管理页面

**功能需求：**

- **概览 Tab：**
  - 服务基本信息
  - 当前状态和健康检查
  - 运行时间统计
  - 资源使用监控图表（CPU/内存/GPU 实时使用率）
- **访问 Tab：**
  - 查看服务访问密码
  - **Web 访问（Coder/Jupyter/File Server）：**
    - 访问 URL（可复制）
    - 一键打开新窗口按钮
  - **SSH 访问（SSH Server）：**
    - 访问指南（分步骤显示）
    - **步骤 1：** 下载 kuberde-cli
      - 多平台下载链接（Windows/macOS/Linux）
      - 安装说明
    - **步骤 2：** SSH 连接方式
      - **方式 A：** 直接命令
        - 显示完整 SSH 命令（可一键复制）
        - 示例：`kuberde-cli ssh connect <workspace-name> <service-name>`
      - **方式 B：** SSH Config 配置
        - 生成 SSH config 片段（可复制）
        - 示例：

```
          Host my-dev-env
            ProxyCommand kuberde-cli ssh proxy <workspace-name> <service-name>
            User developer
```

- **日志 Tab：**
  - 实时日志流（WebSocket）
  - 日志级别筛选
  - 搜索功能
  - 下载日志按钮
- **配置 Tab：**
  - 查看和编辑资源配置
  - 修改环境变量
  - 保存后需要重启提示

**交互需求：**

- Tab 切换流畅
- 实时数据更新（WebSocket 或轮询）
- 一键复制功能
- 日志自动滚动和暂停

------

## 4. 全局功能模块

### 4.1 顶部导航栏

**功能需求：**

- Logo 和系统名称
- 主导航菜单：
  - Dashboard（首页）
  - Workspaces（我的工作空间）
  - Users（用户管理，仅管理员可见）
  - Settings（设置）
- 右侧用户菜单：
  - 当前用户名和角色显示
  - 个人资料
  - 资源配额查看
  - 退出登录

### 4.2 侧边栏（可选）

**功能需求：**

- 快速访问常用 Workspace
- 资源使用情况摘要
- 最近活动

### 4.3 通知系统

**功能需求：**

- 资源配额不足告警
- 服务状态变更通知
- 系统公告

------

## 5. 页面流程设计

### 5.1 用户登录后流程

```
登录 → Dashboard（资源概览）→ Workspace 列表 → 选择/创建 Workspace 
→ Workspace 详情 → 服务管理 → 创建/访问服务
```

### 5.2 创建开发环境典型流程

```
1. 点击"创建 Workspace"
2. 填写名称和分配存储
3. 保存后自动跳转到 Workspace 详情
4. 点击"添加服务"
5. 选择服务类型（如 Coder Server）
6. 配置资源（使用推荐配置）
7. 创建并自动启动
8. 等待服务就绪（显示进度）
9. 点击"访问"打开开发环境
```

### 5.3 SSH 访问流程

```
1. 进入 SSH Server 服务详情
2. 切换到"访问"Tab
3. 查看访问指南
4. 下载 kuberde-cli（首次）
5. 复制 SSH 命令或配置
6. 在本地终端执行
7. 开始开发
```

------

## 6. UI 设计建议

### 6.1 视觉设计

- **配色方案：**
  - 主色：技术蓝（`#1890FF`）
  - 辅助色：成功绿（`#52C41A`）、警告黄（`#FAAD14`）、错误红（`#F5222D`）
  - 中性色：深灰文字、浅灰背景
- **图标系统：**
  - 使用统一图标库（如 Ant Design Icons、Material Icons）
  - 服务类型有明显图标区分

### 6.2 响应式设计

- 支持桌面端（1920px、1440px、1280px）
- 移动端适配（查看状态和简单操作）

### 6.3 状态指示

- **服务状态颜色编码：**
  - 运行中：绿色
  - 已停止：灰色
  - 启动中：蓝色（动画）
  - 错误：红色
  - 重启中：黄色（动画）

### 6.4 数据可视化

- 资源使用：环形进度条或柱状图
- 趋势监控：实时折线图
- 配额对比：堆叠柱状图